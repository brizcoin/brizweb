<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRIZ - SOON</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #000000;
            font-family: Arial, sans-serif;
            color: #ffffff;
            position: relative;
            overflow-y: auto;
            transition: background-color 0.3s ease;
        }
        body.light-mode {
            background-color: #ffffff;
            color: #000000;
        }
        .coming-soon {
            font-size: 4rem;
            font-weight: bold;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #404040;
        }
        body.light-mode .coming-soon {
            color: #bfbfbf;
        }
        @keyframes pulse {
            0% { transform: scale(1); color: #404040; }
            25% { transform: scale(1.4); color: #707070; }
            50% { transform: scale(1.96); color: #a0a0a0; }
            75% { transform: scale(2.744); color: #d0d0d0; }
            76% { display: none; }
            100% { transform: scale(1); color: #404040; }
        }
        @keyframes pulse-light {
            0% { transform: scale(1); color: #bfbfbf; }
            25% { transform: scale(1.4); color: #8f8f8f; }
            50% { transform: scale(1.96); color: #5f5f5f; }
            75% { transform: scale(2.744); color: #2f2f2f; }
            76% { display: none; }
            100% { transform: scale(1); color: #bfbfbf; }
        }
        .very-soon {
            display: none;
            font-size: 4rem;
            font-weight: bold;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #d0d0d0;
        }
        body.light-mode .very-soon {
            color: #2f2f2f;
        }
        .briz-text {
            font-family: 'League Spartan', sans-serif;
        }
        .x-icon {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2rem;
            text-decoration: none;
            color: #ffffff;
        }
        body.light-mode .x-icon {
            color: #000000;
        }
        .x-icon:hover {
            color: #d0d0d0;
        }
        body.light-mode .x-icon:hover {
            color: #2f2f2f;
        }
        .logo {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 100px;
            height: 100px;
            transition: opacity 0.3s ease;
        }
        .logo.fade {
            opacity: 0;
        }
        .toggle-container {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
        }
        .toggle-label {
            margin-right: 10px;
            font-size: 1rem;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #2196F3;
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        .crypto-columns {
            display: flex;
            justify-content: center;
            gap: 20px;
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
        }
        .crypto-container.prices, .crypto-container.top-coins {
            background: rgba(0, 0, 0, 0.7);
            border-radius: 8px;
            padding: 10px;
            text-align: left;
            min-width: 180px;
        }
        body.light-mode .crypto-container {
            background: rgba(255, 255, 255, 0.7);
        }
        .top-coins h3 {
            margin: 0 0 10px;
            font-size: 1.2rem;
        }
        .top-coin {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        .top-coin img {
            width: 20px;
            height: 20px;
            margin-right: 10px;
        }
        .price-change.positive {
            color: #00ff00;
            margin-left: 5px;
        }
        .price-change.negative {
            color: #ff0000;
            margin-left: 5px;
        }
        @media (max-width: 768px) {
            .coming-soon, .very-soon {
                font-size: 8vw;
            }
            .x-icon {
                font-size: 1.5rem;
            }
            .logo {
                width: 80px;
                height: 80px;
            }
            .crypto-columns {
                flex-direction: column;
                gap: 10px;
                bottom: 80px;
                width: 90%;
            }
            .crypto-container {
                min-width: unset;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <img src="BRIZ_FINAL.png" alt="BRIZCOIN Logo" class="logo" id="logo">
    <div class="coming-soon">Coming Soon</div>
    <div class="very-soon"><span class="briz-text">$BRIZCOIN</span> - VERY SOON</div>
    <a href="https://x.com/Brizcoin_xyz" class="x-icon" target="_blank">ùïè</a>
    <div class="toggle-container">
        <span class="toggle-label">Dark</span>
        <label class="switch">
            <input type="checkbox" id="theme-toggle">
            <span class="slider"></span>
        </label>
    </div>
    <div class="crypto-columns">
        <div class="crypto-container prices">
            <p>BTC: <span id="btc-price">Loading...</span><span id="btc-change" class="price-change"></span></p>
            <p>ETH: <span id="eth-price">Loading...</span><span id="eth-change" class="price-change"></span></p>
            <p>SOL: <span id="sol-price">Loading...</span><span id="sol-change" class="price-change"></span></p>
        </div>
        <div class="crypto-container top-coins">
            <h3>Interesting memecoins now</h3>
            <div id="top-coins-list">Loading...</div>
        </div>
    </div>

    <script>
        // Helper function to delay requests
        const delay = ms => new Promise(resolve => setTimeout(resolve, ms));

        async function fetchCryptoPrices() {
            try {
                const response = await fetch('/.netlify/functions/coingecko-prices');
                if (!response.ok) throw new Error(`CoinGecko fetch failed: ${await response.text()}`);
                const data = await response.json();

                document.getElementById('btc-price').textContent = `$${data.bitcoin.usd.toLocaleString()}`;
                const btcChange = data.bitcoin.usd_24h_change.toFixed(2);
                document.getElementById('btc-change').textContent = `(${btcChange}%)`;
                document.getElementById('btc-change').classList.add(btcChange >= 0 ? 'positive' : 'negative');

                await delay(2000);
                document.getElementById('eth-price').textContent = `$${data.ethereum.usd.toLocaleString()}`;
                const ethChange = data.ethereum.usd_24h_change.toFixed(2);
                document.getElementById('eth-change').textContent = `(${ethChange}%)`;
                document.getElementById('eth-change').classList.add(ethChange >= 0 ? 'positive' : 'negative');

                await delay(2000);
                document.getElementById('sol-price').textContent = `$${data.solana.usd.toLocaleString()}`;
                const solChange = data.solana.usd_24h_change.toFixed(2);
                document.getElementById('sol-change').textContent = `(${solChange}%)`;
                document.getElementById('sol-change').classList.add(solChange >= 0 ? 'positive' : 'negative');
            } catch (error) {
                console.error('Crypto Prices Error:', error);
                document.getElementById('btc-price').textContent = 'N/A';
                document.getElementById('eth-price').textContent = 'N/A';
                document.getElementById('sol-price').textContent = 'N/A';
            }
        }

        async function fetchTopCoins() {
            try {
                const response = await fetch('/.netlify/functions/pumpfun-volume');
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`Function failed: ${response.status} - ${errorText}`);
                }
                const data = await response.json();
                if (!data.success) throw new Error(`API error: ${data.message || 'Unknown error'}`);

                const coinList = document.getElementById('top-coins-list');
                coinList.innerHTML = '';
                if (data.data.length === 0) {
                    coinList.innerHTML = '<p>No Pump.fun coins found</p>';
                } else {
                    data.data.forEach(coin => {
                        const div = document.createElement('div');
                        div.className = 'top-coin';
                        div.innerHTML = `
                            <span>${coin.symbol} - ${coin.cname}&nbsp;</span>
                            <span>MCAP: $${coin.mcap}</span>
                            <span><button class="copy-btn" onclick="copyToClipboard('${coin.mintAddress}')">üìã</button>
</span>
`;
                        coinList.appendChild(div);
                    });
                }
            } catch (error) {
                console.error('Top Coins Error:', error);
                document.getElementById('top-coins-list').innerHTML = 'N/A';
            }
        }
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('CA Copied to clipboard: ' + text);
            }).catch(err => {
                console.error('Could not copy text:', err);
            });
        }
        function updateData() {
            fetchCryptoPrices();
            fetchTopCoins();
        }

        updateData();
        setInterval(updateData, 30000);

        const toggle = document.getElementById('theme-toggle');
        const logo = document.getElementById('logo');
        const label = document.querySelector('.toggle-label');
        toggle.addEventListener('change', () => {
            const isLightMode = toggle.checked;
            logo.classList.add('fade');
            setTimeout(() => {
                if (isLightMode) {
                    document.body.classList.add('light-mode');
                    logo.src = 'BRIZ_FINAL_inverse.png';
                    label.textContent = 'Light';
                } else {
                    document.body.classList.remove('light-mode');
                    logo.src = 'BRIZ_FINAL.png';
                    label.textContent = 'Dark';
                }
                logo.classList.remove('fade');
            }, 300);
        });

        const comingSoon = document.querySelector('.coming-soon');
        const verySoon = document.querySelector('.very-soon');
        let isHovering = false;
        let swapTimeout;

        function startAnimation() {
            if (comingSoon.parentNode) {
                comingSoon.style.animation = 'none';
                void comingSoon.offsetWidth;
                const animationName = document.body.classList.contains('light-mode') ? 'pulse-light' : 'pulse';
                comingSoon.style.animation = `${animationName} 5s`;
                clearTimeout(swapTimeout);
                swapTimeout = setTimeout(() => {
                    if (comingSoon.parentNode && isHovering) {
                        comingSoon.remove();
                        verySoon.style.display = 'block';
                    }
                }, 3750);
            }
        }

        comingSoon.addEventListener('mouseenter', () => {
            isHovering = true;
            startAnimation();
        });
        comingSoon.addEventListener('mouseleave', () => {
            comingSoon.style.animation = 'none';
            isHovering = false;
            clearTimeout(swapTimeout);
        });
        comingSoon.addEventListener('touchstart', (e) => {
            e.preventDefault();
            isHovering = true;
            startAnimation();
        });
        comingSoon.addEventListener('touchend', () => {
            comingSoon.style.animation = 'none';
            isHovering = false;
            clearTimeout(swapTimeout);
        });
    </script>
</body>
</html>